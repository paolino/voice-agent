services:
  whisper:
    image: ghcr.io/paolino/whisper-server:latest
    environment:
      WHISPER_MODEL: ${WHISPER_MODEL:-small}
      WHISPER_HTTP_PORT: "9003"
      WHISPER_DEVICE: auto
      WHISPER_COMPUTE_TYPE: auto
    networks:
      - internal

  voice-agent:
    image: ghcr.io/paolino/voice-agent:${VOICE_AGENT_VERSION:-latest}
    env_file: .env
    environment:
      WHISPER_URL: http://whisper:9003/transcribe
      SESSION_STORAGE_PATH: /data/sessions.json
    volumes:
      - voice-agent-data:/data
      - ${HOME}/.claude:/root/.claude:ro
    depends_on:
      - whisper
    networks:
      - internal

volumes:
  voice-agent-data:

networks:
  internal:
